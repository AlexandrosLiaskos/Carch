# Security Policy

> **Note on Development Status**
> This is a pre-1.0 release. While security is taken seriously, formal security practices are still being established. Security will be a higher priority as the project approaches a stable 1.0 release.

## Supported Versions

We provide security updates for the following versions:

| Version | Supported          |
| ------- | ------------------ |
| 0.0.x   | :white_check_mark: |
| < 0.0   | :x:                |

## Reporting a Vulnerability

We take security seriously. If you discover a security vulnerability in Carch, please report it responsibly.

### How to Report

**Email**: alexliaskos@geol.uoa.gr

Please include:

1. Description of the vulnerability
2. Steps to reproduce
3. Potential impact
4. Suggested fix (if any)

### Response Time

- **Initial Response**: Within 48 hours
- **Status Update**: Within 7 days
- **Fix Timeline**: Depends on severity
  - Critical: Within 7 days
  - High: Within 30 days
  - Medium: Within 90 days
  - Low: Next minor release

### Disclosure Policy

- Please do not publicly disclose the vulnerability until we have released a fix
- We will credit you in the release notes (unless you prefer to remain anonymous)
- We will publish a security advisory once the fix is released

## Security Considerations

### Input Validation

Carch processes `.carch` schema files as input. While the compiler performs robust parsing and validation:

- **Untrusted Input**: Do not compile schemas from untrusted sources without review
- **Resource Limits**: Very large or deeply nested schemas may consume significant memory
- **Filesystem Access**: The compiler writes to the specified output directory

### Generated Code

The C++ code generated by Carch:

- Is intended for compilation with a C++17 or later compiler
- Does not include runtime safety checks
- Should be used with appropriate C++ best practices
- May contain types that require careful memory management (std::string, std::vector)

### Build Integration

When integrating Carch into your build system:

- Ensure the Carch binary is from a trusted source
- Verify checksums of downloaded releases
- Use version pinning in CI/CD
- Review generated code periodically

### Fuzzing

We use fuzzing to discover potential security issues:

- LibFuzzer harnesses for lexer, parser, and full pipeline
- Continuous fuzzing with OSS-Fuzz (planned)
- AddressSanitizer and UndefinedBehaviorSanitizer in tests

## Known Limitations

- **No Sandboxing**: Carch runs with full process permissions
- **Memory Usage**: Large schemas (1000+ types) may use significant memory
- **Stack Depth**: Deeply nested types may cause stack overflow (limit: ~100 levels)

## Best Practices

1. **Validate Schemas**: Use `carch-validate` to check schemas before compilation
2. **Code Review**: Review generated C++ code in security-critical applications
3. **Update Regularly**: Keep Carch updated to receive security fixes
4. **Limit Complexity**: Avoid generating excessively complex schemas
5. **Build Security**: Run Carch in isolated build environments

## Security Features

- **Type Safety**: Strong type checking prevents many errors
- **Memory Safety**: Modern C++ (smart pointers, RAII) in implementation
- **No Code Execution**: Carch only generates code, doesn't execute it
- **Deterministic Output**: Same input always produces same output

## Vulnerability History

No security vulnerabilities have been reported as of version 0.0.1.

---

For general questions about security, see [Discussions](https://github.com/AlexandrosLiaskos/Carch/discussions).

For non-security bugs, use [Issues](https://github.com/AlexandrosLiaskos/Carch/issues).
